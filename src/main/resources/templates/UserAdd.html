<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="common/layout" xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8"/>
    <title>AlphaZ</title>
    <link rel="stylesheet" href="resources/plugins/datatables/dataTables.bootstrap.css"/>
    <link rel="stylesheet" href="resources/plugins/bootstrap-select-1.12.4/css/bootstrap-select.min.css"/>
    <link rel="stylesheet" href="resources/plugins/sweetalert/sweetalert.css">
    <!--<link rel="stylesheet" href="resources/plugins/datepicker/datepicker3.css">-->
    <link rel="stylesheet" href="resources/plugins/dist/css/selectize.default.css">
    <link rel="stylesheet" href="resources/plugins/bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.min.css">
    <style>
        .waring{
            border:2px solid red;
        }
    </style>
</head>
<body>
<div layout:fragment="content">
    <section class="content-header">
        <h1>
            添加用户
            <small></small>
        </h1>
        <button class="btn btn-primary" style="float: right;margin-top: -20px;margin-bottom: 5px;" onclick="save();">保存</button>
    </section>
    <section class="content">
        <img class='img_close' src='resources/img/clone.png' style="display: none">
        <div class="row">
            <div class="col-xs-12">
                <div class="box">
                    <div class="box-header">
                        <h3 class="box-title">用户信息</h3>
                        <!--<ul class="nav navbar-right panel_toolbox">
                            <li><a href="tocargolist" style="margin-right:10px;"><i class="fa fa-arrow-left"></i>返回</a>
                            </li>
                        </ul>-->
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <div class="form-group row">
                            <div class="col-md-4">
                                <div class="input-group">
                                    <span class="input-group-addon">用户名称</span>
                                    <input type="text" class="form-control" placeholder="请填写用户名称" id="username">
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-4">
                                <div class="input-group">
                                    <span class="input-group-addon">密码</span>
                                    <input type="text" class="form-control" placeholder="请填写用户名称" id="password">
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-4">
                                <div class="input-group">
                                    <span class="input-group-addon">用户名昵称</span>
                                    <input type="text" class="form-control" placeholder="用户名昵称" id="note">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="resources/plugins/page/page.js"></script>
    <script src="resources/plugins/sweetalert/sweetalert.min.js"></script>
    <script src="resources/plugins/bootstrap-select-1.12.4/js/bootstrap-select.min.js"></script>
    <script src="resources/js/ajaxfileupload.js" type="text/javascript" charset="utf-8"></script>
    <script src="resources/js/jquery.barcode.js" type="text/javascript" charset="utf-8"></script>
    <!--<script src="resources/plugins/datepicker/bootstrap-datepicker.js"></script>-->
    <!-- <script src="resources/plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>-->
    <script src="resources/plugins/dist/js/standalone/selectize.js"></script>
    <script src="resources/plugins/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.min.js"></script>
    <script src="resources/plugins/bootstrap-datetimepicker-master/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>

    <script th:inline="javascript">//引用
    $(function(e){
        $("input").blur(function(){
            if($(this).val() != ""){
                $(this).removeClass("waring");
            }
        })
    })

    function save(){
        var username = $("#username").val();
        var note = $("#note").val();
       var password = $("#password").val();
        var num = 0;
        if(!username || username == ""){
            $("#username").addClass("waring");
            num = 1;
        }
       if(!password || password == ""){
           $("#password").addClass("waring");
           num = 1;
       }
        if(!note || note == ""){
            $("#note").addClass("waring");
            num = 1;
        }
        if(num == 1){
            return;
        }
//        alert(clientname)
        $.ajax({
            type: "post",
            url: "/rhi-user/cu_user",
            contentType:'application/json',
            data: JSON.stringify({
                "userName": username,
                "password" : password,
                "nickName" : note,
            }),
            dataType: "json",
            success: function (data) {
                if(data.httpStatus == '00'){
                    swal({
                        title: "提示！",
                        text: "创建成功！",
                        type: "success"
                    }, function () {
                        location.href="hUserList";
                    });
                }else {
                    swal({
                        title: "提示！",
                        text: data.message,
                        type: "error"
                    }, function () {
                        location.href="hUserList";
                    });
                }
            },
            error: function () {

            }
        })

    }



    </script>
</div>

</body>

</html>