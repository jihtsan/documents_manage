<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="common/layout" xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8"/>
    <title>AlphaZ</title>
    <link rel="stylesheet" href="resources/plugins/datatables/dataTables.bootstrap.css"/>
    <link rel="stylesheet" href="resources/plugins/bootstrap-select-1.12.4/css/bootstrap-select.min.css"/>
    <link rel="stylesheet" href="resources/plugins/sweetalert/sweetalert.css">
    <!--<link rel="stylesheet" href="resources/plugins/datepicker/datepicker3.css">-->
    <link rel="stylesheet" href="resources/plugins/dist/css/selectize.default.css">
    <link rel="stylesheet" href="resources/plugins/bootstrap-datetimepicker-master/css/bootstrap-datetimepicker.min.css">

</head>
<body>
<div layout:fragment="content">
    <section class="content-header">
        <h1>
            修改密码
            <small></small>
        </h1>
        <!--<button class="btn btn-primary" style="float: right;margin-top: -20px;margin-bottom: 5px;display: none;" id="toupdate">编辑</button>-->
        <!--<button class="btn btn-primary" style="float: right;margin-top: -20px;margin-bottom: 5px;display: none;" id="tosave">保存</button>-->
        <button class="btn btn-primary" style="float: right;margin-top: -20px;margin-bottom: 5px;" id="toSubmit">提交</button>
    </section>
    <section class="content">
        <img class='img_close' src='resources/img/clone.png' style="display: none">
        <div class="row">
            <div class="col-xs-12">
                <div class="box">
                    <div class="box-header">
                        <h3 class="box-title">修改密码</h3>
                        <!--<ul class="nav navbar-right panel_toolbox">
                            <li><a href="tocargolist" style="margin-right:10px;"><i class="fa fa-arrow-left"></i>返回</a>
                            </li>
                        </ul>-->
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <input th:value="${hid}" id="hid" type="hidden">
                        <input th:value="${pagemsg}" id="pagemsg" type="hidden">
                        <div class="form-group row">
                            <div class="col-md-4">
                                <div class="input-group">
                                    <span class="input-group-addon">修改密码</span>
                                    <input type="text" class="form-control disinp" placeholder="请填写密码" id="password">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="resources/plugins/page/page.js"></script>
    <script src="resources/plugins/sweetalert/sweetalert.min.js"></script>
    <script src="resources/plugins/bootstrap-select-1.12.4/js/bootstrap-select.min.js"></script>
    <script src="resources/js/ajaxfileupload.js" type="text/javascript" charset="utf-8"></script>
    <script src="resources/js/jquery.barcode.js" type="text/javascript" charset="utf-8"></script>
    <!--<script src="resources/plugins/datepicker/bootstrap-datepicker.js"></script>-->
    <!-- <script src="resources/plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>-->
    <script src="resources/plugins/dist/js/standalone/selectize.js"></script>
    <script src="resources/plugins/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker.min.js"></script>
    <script src="resources/plugins/bootstrap-datetimepicker-master/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="resources/plugins/moment/moment.min.js"></script>

    <script th:inline="javascript">//引用

    var userId = /*[[${userId}]]*/;//任务id
    $(function(){
//        $("#toupdate").show();
//        $(".disinp").attr("disabled",true);

//        $.ajax({
//            type: "post",
//            url: "user/" + userId + "/getuserinf",
//            dataType: "json",
//            success: function (data) {
//                console.log("数据...")
//                console.log(data)
//                template(data.data);
//            },
//            error: function () {
//                swal("跳转失败！", "跳转失败。", "error");
//            }
//        })

    });

//    function template(data){
//        var password = data.password;
//        $("#password").val(password);
//    }

//    $("#toupdate").on("click",function(){
//        $("#toupdate").hide();
//        $("#tosave").show();
//        $(".disinp").attr("disabled",false);
//        $("#setbox").show();
//        $("#tb0 tbody tr td").find("input").attr("disabled",false);
//    });

    $("#toSubmit").on("click",function(){
       var password = $("#password").val();

        $.ajax({
            url:"user/updatepasswordbyuserid",
            type:"post",
            data: {
                "userid": userId,
                "password": password
            },
            success:function(data){
                if(data.statusCode == 0){
                    swal({
                        title: "提示！",
                        text: "密码修改成功！",
                        type: "success"
                    }, function () {
                        location.href = "toUserList";
                    })
                }
            }
        });

    })



    </script>
</div>

</body>

</html>